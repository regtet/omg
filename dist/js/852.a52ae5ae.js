"use strict";(self["webpackChunklike"]=self["webpackChunklike"]||[]).push([[852],{5122:function(e,t,o){o.r(t),o.d(t,{default:function(){return m}});var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"goods"},[o("MBX",{attrs:{label1:"商品管理",label2:"商品列表"}}),o("el-card",[o("el-input",{staticClass:"input-with-select",staticStyle:{width:"400px"},attrs:{clearable:"",placeholder:"请输入搜索内容"},on:{clear:e.clear,input:e.input},model:{value:e.GoodsData.query,callback:function(t){e.$set(e.GoodsData,"query",t)},expression:"GoodsData.query"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.seatch},slot:"append"})],1),o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/add")}}},[e._v("添加商品")]),[o("el-table",{staticClass:"mt",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[o("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),o("el-table-column",{attrs:{prop:"goods_name",width:"700px",label:"商品名称"}}),o("el-table-column",{attrs:{prop:"goods_price",label:"商品价格（元）",width:"120px"}}),o("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"100px"}}),o("el-table-column",{attrs:{prop:"add_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(1e3*t.row.add_time).toLocaleString().replace(/\//g,"-"))+" ")]}}])}),o("el-table-column",{attrs:{prop:"date",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(o){return e.updates(t.row)}}}),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(o){return e.del(t.row)}}})]}}])})],1)],o("el-pagination",{staticClass:"mt",attrs:{"current-page":e.GoodsData.pagenum,"page-sizes":[5,10,20],"page-size":e.GoodsData.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.GoodsData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),o("el-dialog",{attrs:{title:"编辑商品",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px",rules:e.rules}},[o("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[o("el-input",{model:{value:e.ruleForm.goods_name,callback:function(t){e.$set(e.ruleForm,"goods_name",t)},expression:"ruleForm.goods_name"}})],1),o("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[o("el-input",{model:{value:e.ruleForm.goods_price,callback:function(t){e.$set(e.ruleForm,"goods_price",t)},expression:"ruleForm.goods_price"}})],1),o("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[o("el-input",{model:{value:e.ruleForm.goods_number,callback:function(t){e.$set(e.ruleForm,"goods_number",t)},expression:"ruleForm.goods_number"}})],1),o("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[o("el-input",{model:{value:e.ruleForm.goods_weight,callback:function(t){e.$set(e.ruleForm,"goods_weight",t)},expression:"ruleForm.goods_weight"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.out}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)],2)],1)},a=[],s=(o(6699),o(6486)),i=o.n(s),n=o(2348),l=o(2767),u={data(){return{query:"",tableData:[],_:i(),GoodsData:{query:"",pagenum:1,pagesize:5,total:10},id:0,ruleForm:{goods_name:""},dialogVisible:!1,rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:3,max:8,message:"",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}]}}},methods:{handleSizeChange(e){this.GoodsData.pagesize=e,this.send(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.GoodsData.pagenum=e,this.send(),console.log(`当前页: ${e}`)},async send(){console.log(this.GoodsData);const e=await(0,l.Ce)(this.GoodsData);console.log(e),this.tableData=e.goods,this.tableDataS=this.tableData,this.GoodsData.pagenum=1*e.pagenum,this.GoodsData.total=e.total},clear(){this.send()},input:i().debounce((function(){this.send()}),300),async updates(e){console.log(e,1111111111),this.ruleForm=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0;const t=await(0,l.ol)({id:e.goods_id});this.id=t.goods_cat},del(e){this.id=e.goods_id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await(0,l.Yp)(this.id);this.send(),this.$message({type:"success",message:"删除成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},out(){this.$refs.ruleForm.resetFields(),this.value=[],this.dialogVisible=!1},ok(){this.$refs.ruleForm.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let{goods_name:e,goods_price:t,goods_number:o,goods_weight:r,goods_id:a}=this.ruleForm;console.log(e,t,o,r,a),console.log(a),(0,l.yr)({goods_name:e,goods_price:t,goods_number:o,goods_weight:r,goods_id:a,goods_cat:this.id}).then((e=>{this.dialogVisible=!1,this.send()}))}this.$refs.ruleForm.resetFields()}))},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{}))},seatch(){console.log(this.GoodsData.query),console.log("NaN"!==parseFloat(this.GoodsData.query).toString()),"NaN"!==parseFloat(this.GoodsData.query).toString()?(0,l.ol)({id:this.GoodsData.query}).then((e=>{this.tableData=[e]})).catch((e=>{this.tableData=[]})):(console.log(this.tableDataS),console.log(this.GoodsData.query),this.tableData=this.tableDataS.filter((e=>e.goods_name.includes(this.GoodsData.query.trim()))))}},components:{MBX:n.Z},computed:{},watch:{},created(){this.send()}},d=u,c=o(1001),g=(0,c.Z)(d,r,a,!1,null,"c709ceaa",null),m=g.exports},2767:function(e,t,o){o.d(t,{$K:function(){return i},Ce:function(){return a},NL:function(){return n},UY:function(){return d},V6:function(){return g},Wd:function(){return u},Yp:function(){return p},cD:function(){return m},g_:function(){return l},gg:function(){return c},m1:function(){return s},ol:function(){return b},yr:function(){return h}});var r=o(1899);function a(e){return(0,r.Z)({url:"goods",method:"GET",params:e})}function s(e){return(0,r.Z)({url:"categories",method:"GET",params:e})}function i(e){return(0,r.Z)({url:"categories",method:"POST",data:e})}function n(e){return(0,r.Z)({url:"categories/"+e.id,method:"PUT",data:e})}function l(e){return(0,r.Z)({url:"categories/"+e,method:"DELETE"})}function u(e){return(0,r.Z)({url:"categories/"+e.id+"/attributes",method:"GET",params:e})}function d(e){return(0,r.Z)({url:"categories/"+e.id+"/attributes",method:"POST",data:e})}function c(e){return(0,r.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"PUT",data:e})}function g(e){return console.log(e),(0,r.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"DELETE"})}function m(e){return(0,r.Z)({url:"goods/",method:"POST",data:e})}function h(e){return(0,r.Z)({url:"goods/"+1*e.goods_id,method:"PUT",data:e})}function p(e){return(0,r.Z)({url:"goods/"+e,method:"DELETE"})}function b(e){return(0,r.Z)({url:"goods/"+e.id,method:"GET"})}}}]);
//# sourceMappingURL=852.a52ae5ae.js.map