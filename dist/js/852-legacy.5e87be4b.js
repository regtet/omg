(self["webpackChunklike"]=self["webpackChunklike"]||[]).push([[852],{5122:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods"},[r("MBX",{attrs:{label1:"商品管理",label2:"商品列表"}}),r("el-card",[r("el-input",{staticClass:"input-with-select",staticStyle:{width:"400px"},attrs:{clearable:"",placeholder:"请输入搜索内容"},on:{clear:e.clear,input:e.input},model:{value:e.GoodsData.query,callback:function(t){e.$set(e.GoodsData,"query",t)},expression:"GoodsData.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.seatch},slot:"append"})],1),r("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/add")}}},[e._v("添加商品")]),[r("el-table",{staticClass:"mt",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),r("el-table-column",{attrs:{prop:"goods_name",width:"700px",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"goods_price",label:"商品价格（元）",width:"120px"}}),r("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"100px"}}),r("el-table-column",{attrs:{prop:"add_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(1e3*t.row.add_time).toLocaleString().replace(/\//g,"-"))+" ")]}}])}),r("el-table-column",{attrs:{prop:"date",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.updates(t.row)}}}),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.del(t.row)}}})]}}])})],1)],r("el-pagination",{staticClass:"mt",attrs:{"current-page":e.GoodsData.pagenum,"page-sizes":[5,10,20],"page-size":e.GoodsData.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.GoodsData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"编辑商品",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px",rules:e.rules}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:e.ruleForm.goods_name,callback:function(t){e.$set(e.ruleForm,"goods_name",t)},expression:"ruleForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{model:{value:e.ruleForm.goods_price,callback:function(t){e.$set(e.ruleForm,"goods_price",t)},expression:"ruleForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{model:{value:e.ruleForm.goods_number,callback:function(t){e.$set(e.ruleForm,"goods_number",t)},expression:"ruleForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{model:{value:e.ruleForm.goods_weight,callback:function(t){e.$set(e.ruleForm,"goods_weight",t)},expression:"ruleForm.goods_weight"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.out}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)],2)],1)},n=[],a=r(6198),i=(r(8862),r(1539),r(9714),r(7327),r(6699),r(2023),r(3210),r(5666),r(6486)),s=r.n(i),u=r(2348),c=r(2767),l={data:function(){return{query:"",tableData:[],_:s(),GoodsData:{query:"",pagenum:1,pagesize:5,total:10},id:0,ruleForm:{goods_name:""},dialogVisible:!1,rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:3,max:8,message:"",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}]}}},methods:{handleSizeChange:function(e){this.GoodsData.pagesize=e,this.send(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.GoodsData.pagenum=e,this.send(),console.log("当前页: ".concat(e))},send:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.GoodsData),t.next=3,(0,c.Ce)(e.GoodsData);case 3:r=t.sent,console.log(r),e.tableData=r.goods,e.tableDataS=e.tableData,e.GoodsData.pagenum=1*r.pagenum,e.GoodsData.total=r.total;case 9:case"end":return t.stop()}}),t)})))()},clear:function(){this.send()},input:s().debounce((function(){this.send()}),300),updates:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e,1111111111),t.ruleForm=JSON.parse(JSON.stringify(e)),t.dialogVisible=!0,r.next=5,(0,c.ol)({id:e.goods_id});case 5:o=r.sent,t.id=o.goods_cat;case 7:case"end":return r.stop()}}),r)})))()},del:function(e){var t=this;this.id=e.goods_id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Yp)(t.id);case 2:e.sent,t.send(),t.$message({type:"success",message:"删除成功!"});case 5:case"end":return e.stop()}}),e)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},out:function(){this.$refs.ruleForm.resetFields(),this.value=[],this.dialogVisible=!1},ok:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(r){var o,n,a,i,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}o=e.ruleForm,n=o.goods_name,a=o.goods_price,i=o.goods_number,s=o.goods_weight,u=o.goods_id,console.log(n,a,i,s,u),console.log(u),(0,c.yr)({goods_name:n,goods_price:a,goods_number:i,goods_weight:s,goods_id:u,goods_cat:e.id}).then((function(t){e.dialogVisible=!1,e.send()})),t.next=9;break;case 7:return console.log("error submit!!"),t.abrupt("return",!1);case 9:e.$refs.ruleForm.resetFields();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},seatch:function(){var e=this;console.log(this.GoodsData.query),console.log("NaN"!==parseFloat(this.GoodsData.query).toString()),"NaN"!==parseFloat(this.GoodsData.query).toString()?(0,c.ol)({id:this.GoodsData.query}).then((function(t){e.tableData=[t]})).catch((function(t){e.tableData=[]})):(console.log(this.tableDataS),console.log(this.GoodsData.query),this.tableData=this.tableDataS.filter((function(t){return t.goods_name.includes(e.GoodsData.query.trim())})))}},components:{MBX:u.Z},computed:{},watch:{},created:function(){this.send()}},d=l,g=r(1001),f=(0,g.Z)(d,o,n,!1,null,"c709ceaa",null),p=f.exports},2092:function(e,t,r){var o=r(9974),n=r(1702),a=r(8361),i=r(7908),s=r(6244),u=r(5417),c=n([].push),l=function(e){var t=1==e,r=2==e,n=3==e,l=4==e,d=6==e,g=7==e,f=5==e||d;return function(p,m,h,b){for(var v,_,x=i(p),y=a(x),w=o(m,h),D=s(y),k=0,F=b||u,E=t?F(p,D):r||g?F(p,0):void 0;D>k;k++)if((f||k in y)&&(v=y[k],_=w(v,k,x),e))if(t)E[k]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return k;case 2:c(E,v)}else switch(e){case 4:return!1;case 7:c(E,v)}return d?-1:n||l?l:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:function(e,t,r){var o=r(7293),n=r(5112),a=r(7392),i=n("species");e.exports=function(e){return a>=51||!o((function(){var t=[],r=t.constructor={};return r[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},7475:function(e,t,r){var o=r(7854),n=r(3157),a=r(4411),i=r(111),s=r(5112),u=s("species"),c=o.Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,a(t)&&(t===c||n(t.prototype))?t=void 0:i(t)&&(t=t[u],null===t&&(t=void 0))),void 0===t?c:t}},5417:function(e,t,r){var o=r(7475);e.exports=function(e,t){return new(o(e))(0===t?0:t)}},4964:function(e,t,r){var o=r(5112),n=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(o){}}return!1}},7850:function(e,t,r){var o=r(111),n=r(4326),a=r(5112),i=a("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},3929:function(e,t,r){var o=r(7854),n=r(7850),a=o.TypeError;e.exports=function(e){if(n(e))throw a("The method doesn't accept regular expressions");return e}},7066:function(e,t,r){"use strict";var o=r(9670);e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4706:function(e,t,r){var o=r(6916),n=r(2597),a=r(7976),i=r(7066),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||n(e,"flags")||!a(s,e)?t:o(i,e)}},6091:function(e,t,r){var o=r(6530).PROPER,n=r(7293),a=r(1361),i="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||i[e]()!==i||o&&a[e].name!==e}))}},3111:function(e,t,r){var o=r(1702),n=r(4488),a=r(1340),i=r(1361),s=o("".replace),u="["+i+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),d=function(e){return function(t){var r=a(n(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,l,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},7327:function(e,t,r){"use strict";var o=r(2109),n=r(2092).filter,a=r(1194),i=a("filter");o({target:"Array",proto:!0,forced:!i},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},9714:function(e,t,r){"use strict";var o=r(6530).PROPER,n=r(1320),a=r(9670),i=r(1340),s=r(7293),u=r(4706),c="toString",l=RegExp.prototype,d=l[c],g=s((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),f=o&&d.name!=c;(g||f)&&n(RegExp.prototype,c,(function(){var e=a(this),t=i(e.source),r=i(u(e));return"/"+t+"/"+r}),{unsafe:!0})},2023:function(e,t,r){"use strict";var o=r(2109),n=r(1702),a=r(3929),i=r(4488),s=r(1340),u=r(4964),c=n("".indexOf);o({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~c(s(i(this)),s(a(e)),arguments.length>1?arguments[1]:void 0)}})},3210:function(e,t,r){"use strict";var o=r(2109),n=r(3111).trim,a=r(6091);o({target:"String",proto:!0,forced:a("trim")},{trim:function(){return n(this)}})},2767:function(e,t,r){"use strict";r.d(t,{$K:function(){return i},Ce:function(){return n},NL:function(){return s},UY:function(){return l},V6:function(){return g},Wd:function(){return c},Yp:function(){return m},cD:function(){return f},g_:function(){return u},gg:function(){return d},m1:function(){return a},ol:function(){return h},yr:function(){return p}});var o=r(1899);function n(e){return(0,o.Z)({url:"goods",method:"GET",params:e})}function a(e){return(0,o.Z)({url:"categories",method:"GET",params:e})}function i(e){return(0,o.Z)({url:"categories",method:"POST",data:e})}function s(e){return(0,o.Z)({url:"categories/"+e.id,method:"PUT",data:e})}function u(e){return(0,o.Z)({url:"categories/"+e,method:"DELETE"})}function c(e){return(0,o.Z)({url:"categories/"+e.id+"/attributes",method:"GET",params:e})}function l(e){return(0,o.Z)({url:"categories/"+e.id+"/attributes",method:"POST",data:e})}function d(e){return(0,o.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"PUT",data:e})}function g(e){return console.log(e),(0,o.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"DELETE"})}function f(e){return(0,o.Z)({url:"goods/",method:"POST",data:e})}function p(e){return(0,o.Z)({url:"goods/"+1*e.goods_id,method:"PUT",data:e})}function m(e){return(0,o.Z)({url:"goods/"+e,method:"DELETE"})}function h(e){return(0,o.Z)({url:"goods/"+e.id,method:"GET"})}}}]);
//# sourceMappingURL=852-legacy.5e87be4b.js.map