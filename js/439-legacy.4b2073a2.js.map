{"version":3,"file":"js/439-legacy.4b2073a2.js","mappings":"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","sources":["webpack://like/./src/views/users.vue?6d0c","webpack://like/src/views/users.vue","webpack://like/./src/views/users.vue?c1fd","webpack://like/./src/views/users.vue","webpack://like/./src/api/api.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"users\"},[_c('MBX',{attrs:{\"label1\":\"用户管理\",\"label2\":\"用户列表\"}}),_c('el-card',[_c('el-input',{staticClass:\"input-with-select\",staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.clear,\"input\":_vm.input},model:{value:(_vm.current.query),callback:function ($$v) {_vm.$set(_vm.current, \"query\", $$v)},expression:\"current.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search},slot:\"append\"})],1),_c('el-button',{staticClass:\"ml\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加用户\")]),[_c('el-table',{staticClass:\"mt\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"prop\":\"mg_state\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.change(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.updates(scope.row)}}}),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.del(scope.row)}}}),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"icon\":\"el-icon-s-tools\"},on:{\"click\":function($event){return _vm.set(scope.row)}}})]}}])})],1)],_c('div',{staticClass:\"block mt\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.current.pagenum,\"page-sizes\":[3, 5, 8, 10],\"page-size\":_vm.current.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":_vm.title == 0 ? '添加用户' : _vm.title == 1 ? '编辑用户' : '分配角色',\"visible\":_vm.dialogVisible,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title != 2),expression:\"title != 2\"}],ref:\"form\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":_vm.title == 1},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),(_vm.title == 0)?_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.form.mobile),callback:function ($$v) {_vm.$set(_vm.form, \"mobile\", $$v)},expression:\"form.mobile\"}})],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title == 2),expression:\"title == 2\"}]},[_c('li',[_vm._v(\"当前的用户 : \"+_vm._s(_vm.userBox.username))]),_c('li',{staticClass:\"mt\"},[_vm._v(\"当前的角色 : \"+_vm._s(_vm.userBox.role_name))]),_c('div',{staticClass:\"mt\"},[_vm._v(\" 分配新角色 : \"),_c('el-cascader',{attrs:{\"options\":_vm.options,\"props\":_vm.defaultParams},on:{\"change\":_vm.handleChange},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")])],1)],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"users\">\r\n    <MBX label1=\"用户管理\" label2=\"用户列表\"></MBX>\r\n\r\n    <el-card>\r\n      <!-- 头部搜索 -->\r\n      <el-input\r\n        style=\"width: 400px\"\r\n        placeholder=\"请输入内容\"\r\n        v-model=\"current.query\"\r\n        class=\"input-with-select\"\r\n        clearable\r\n        @clear=\"clear\"\r\n        @input=\"input\"\r\n      >\r\n        <el-button\r\n          slot=\"append\"\r\n          icon=\"el-icon-search\"\r\n          @click=\"search\"\r\n        ></el-button>\r\n      </el-input>\r\n      <el-button class=\"ml\" type=\"primary\" @click=\"add\">添加用户</el-button>\r\n\r\n      <!-- 表格 -->\r\n      <template>\r\n        <el-table\r\n          :data=\"tableData\"\r\n          class=\"mt\"\r\n          border\r\n          stripe\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column type=\"index\" label=\"#\" width=\"50\"> </el-table-column>\r\n          <el-table-column prop=\"username\" label=\"姓名\" width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"email\" label=\"邮箱\"> </el-table-column>\r\n          <el-table-column prop=\"mobile\" label=\"电话\"> </el-table-column>\r\n          <el-table-column prop=\"role_name\" label=\"角色\"> </el-table-column>\r\n          <el-table-column prop=\"mg_state\" label=\"状态\">\r\n            <template slot-scope=\"scope\">\r\n              <el-switch\r\n                v-model=\"scope.row.mg_state\"\r\n                @change=\"change(scope.row)\"\r\n              >\r\n              </el-switch>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"primary\"\r\n                icon=\"el-icon-edit\"\r\n                @click=\"updates(scope.row)\"\r\n              ></el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                @click=\"del(scope.row)\"\r\n              ></el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"warning\"\r\n                icon=\"el-icon-s-tools\"\r\n                @click=\"set(scope.row)\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </template>\r\n      <!-- 分页 -->\r\n      <div class=\"block mt\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"current.pagenum\"\r\n          :page-sizes=\"[3, 5, 8, 10]\"\r\n          :page-size=\"current.pagesize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n      <!-- 模态框 -->\r\n      <el-dialog\r\n        :title=\"title == 0 ? '添加用户' : title == 1 ? '编辑用户' : '分配角色'\"\r\n        :visible.sync=\"dialogVisible\"\r\n        :before-close=\"handleClose\"\r\n      >\r\n        <el-form\r\n          v-show=\"title != 2\"\r\n          :model=\"form\"\r\n          :rules=\"rules\"\r\n          ref=\"form\"\r\n          label-width=\"100px\"\r\n          class=\"demo-ruleForm\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input :disabled=\"title == 1\" v-model=\"form.username\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item v-if=\"title == 0\" label=\"密码\" prop=\"password\">\r\n            <el-input v-model=\"form.password\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\" prop=\"email\">\r\n            <el-input v-model=\"form.email\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"电话\" prop=\"mobile\">\r\n            <el-input v-model=\"form.mobile\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div v-show=\"title == 2\">\r\n          <li>当前的用户 : {{ userBox.username }}</li>\r\n          <li class=\"mt\">当前的角色 : {{ userBox.role_name }}</li>\r\n          <div class=\"mt\">\r\n            分配新角色 :\r\n            <el-cascader\r\n              v-model=\"value\"\r\n              :options=\"options\"\r\n              @change=\"handleChange\"\r\n              :props=\"defaultParams\"\r\n            ></el-cascader>\r\n          </div>\r\n        </div>\r\n\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport _ from 'lodash'\r\nimport {\r\n  AddUsers,\r\n  GetList,\r\n  UpArr,\r\n  Del,\r\n  Search,\r\n  State,\r\n  Roles,\r\n  SetUser\r\n} from '../api/api'\r\nimport MBX from '@/components/MBX.vue'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: 0, //控制模态框标题\r\n      _: _,\r\n      form: {\r\n        //表单信息\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      rules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 3, max: 15, message: '长度在6 到 15 个字符', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          {\r\n            pattern:\r\n              /^(?![\\d]+$)(?![a-zA-Z]+$)(?![^\\da-zA-Z]+$)([^\\u4e00-\\u9fa5\\s]){6,20}$/,\r\n            message:\r\n              '请输入6-20位英文字母、数字或者符号（除空格），且字母、数字和标点符号至少包含两种',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          {\r\n            pattern: /^([a-zA-Z0-9]+[-_\\.]?)+@[a-zA-Z0-9]+\\.[a-z]+$/,\r\n            message: '请输入正确的邮箱',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入电话号码', trigger: 'blur' },\r\n          {\r\n            pattern: /^[1][3-9][0-9]{9}$/,\r\n            message: '请输入正确的电话号码',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      tableData: [],\r\n      tableDataS: [],\r\n      current: {\r\n        query: '', //输入框\r\n        pagenum: 1, //当前页\r\n        pagesize: 3 //每页几个\r\n      },\r\n      total: 10, //总页数\r\n      dialogVisible: false, //模态框\r\n      id: 0, //点击当前行的ID\r\n      //分配角色的数据\r\n      userBox: {},\r\n      value: [], //选中的数据\r\n      options: [\r\n        //数据\r\n        {\r\n          value: 'zhinan',\r\n          label: '指南'\r\n        }\r\n      ],\r\n      //级联选择器配置\r\n      defaultParams: {\r\n        label: 'roleName',\r\n        value: 'id',\r\n        children: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    input: _.debounce(function () {\r\n      this.send()\r\n    }, 300),\r\n    // 渲染页面\r\n    async send() {\r\n      const List = await GetList(this.current)\r\n      this.current.pagenum = List.pagenum\r\n      this.total = List.total\r\n      this.tableData = List.users\r\n      this.tableDataS = this.tableData\r\n    },\r\n    // 点击添加用户按钮，弹出模态框\r\n    add() {\r\n      //   for (const key in this.form) {\r\n      //     this.form[key] = \"\";\r\n      //     debugger\r\n      //   }\r\n      this.form = {}\r\n      this.dialogVisible = true\r\n      this.title = 0\r\n      this.$refs.form ? this.$refs.form.resetFields() : ''\r\n    },\r\n    // 添加用户\r\n    async submitForm() {\r\n      if (this.title == 2) {\r\n        if (this.id == 500) {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '不允许修改admin'\r\n          })\r\n          return false\r\n        }\r\n        const data = await SetUser({ id: this.id, rid: this.value[0] })\r\n        this.dialogVisible = false\r\n        this.send()\r\n        return false\r\n      }\r\n      this.$refs.form.validate(async (valid) => {\r\n        if (valid) {\r\n          if (this.title == 0) {\r\n            const Add = await AddUsers(this.form) //添加\r\n            this.dialogVisible = false\r\n            this.send()\r\n          } else {\r\n            console.log(this.form) //编辑\r\n            UpArr({\r\n              id: this.id,\r\n              email: this.form.email,\r\n              mobile: this.form.mobile\r\n            }).then((res) => {\r\n              this.dialogVisible = false\r\n              this.send()\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.current.pagesize = val\r\n      this.send()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.current.pagenum = val\r\n      this.send()\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm('确认关闭？')\r\n        .then((_) => {\r\n          done()\r\n        })\r\n        .catch((_) => {})\r\n    },\r\n    //编辑\r\n    updates(ele) {\r\n      this.$refs.form ? this.$refs.form.resetFields() : ''\r\n      this.id = ele.id\r\n      this.dialogVisible = true\r\n      this.title = 1\r\n      this.form = JSON.parse(JSON.stringify(ele))\r\n      console.log(this.form)\r\n    },\r\n    // 删除\r\n    del(ele) {\r\n      this.id = ele.id\r\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(async () => {\r\n          const Data = await Del({ id: this.id })\r\n          this.send()\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'warning',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    //分配角色\r\n    async set(ele) {\r\n      this.id = ele.id\r\n      const data = await Roles()\r\n      this.options = data\r\n      this.title = 2\r\n      this.dialogVisible = true\r\n      this.userBox = ele\r\n    },\r\n    //搜索\r\n    search() {\r\n      // if (parseFloat(this.current.query).toString() !== 'NaN') {\r\n      //   // const data = await Search({ id: this.current.query });\r\n      //   Search({ id: this.current.query })\r\n      //     .then((res) => {\r\n      //       this.tableData = [res]\r\n      //     })\r\n      //     .catch((res) => {\r\n      //       this.tableData = []\r\n      //     })\r\n      // } else {\r\n      //   this.tableData = this.tableDataS.filter((item) => {\r\n      //     return item.username.includes(this.current.query.trim())\r\n      //   })\r\n      // }\r\n    },\r\n    //清空\r\n    clear() {\r\n      this.send()\r\n    },\r\n    //改变状态\r\n    async change(e) {\r\n      console.log(e)\r\n      const data = await State({ id: e.id, type: e.mg_state })\r\n      this.send()\r\n    },\r\n    handleChange(value) {\r\n      this.value = value\r\n    }\r\n  },\r\n  components: { MBX },\r\n  computed: {},\r\n  watch: {},\r\n  created() {\r\n    this.send()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.users {\r\n  min-width: 1140px;\r\n  ::v-deep .has-gutter th {\r\n    font-weight: 700;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./users.vue?vue&type=template&id=2b1a85eb&scoped=true&\"\nimport script from \"./users.vue?vue&type=script&lang=js&\"\nexport * from \"./users.vue?vue&type=script&lang=js&\"\nimport style0 from \"./users.vue?vue&type=style&index=0&id=2b1a85eb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b1a85eb\",\n  null\n  \n)\n\nexport default component.exports","import api from './request'\r\nexport function LoginApi(data) {\r\n  // 登录\r\n  return api({\r\n    url: 'login',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\nexport function GetMenus() {\r\n  // 左侧菜单权限\r\n  return api({\r\n    url: 'menus',\r\n    method: 'GET'\r\n  })\r\n}\r\nexport function GetList(params) {\r\n  // 用户列表\r\n  return api({\r\n    url: 'users',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\nexport function AddUsers(data) {\r\n  // 添加用户\r\n  return api({\r\n    url: 'users',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\nexport function UpArr(data) {\r\n  // 编辑用户\r\n  return api({\r\n    url: 'users/' + data.id,\r\n    method: 'PUT',\r\n    data\r\n  })\r\n}\r\nexport function Del(data) {\r\n  // 删除用户\r\n  return api({\r\n    url: 'users/' + data.id,\r\n    method: 'DELETE'\r\n  })\r\n}\r\nexport function Search(data) {\r\n  // 搜索用户\r\n  return api({\r\n    url: 'users/' + data.id,\r\n    method: 'GET'\r\n  })\r\n}\r\nexport function State(data) {\r\n  // 修改用户状态\r\n  return api({\r\n    url: 'users/' + data.id + '/state/' + data.type,\r\n    method: 'PUT'\r\n  })\r\n}\r\nexport function SetUser(data) {\r\n  // 分配用户角色\r\n  return api({\r\n    url: 'users/' + data.id + '/role/',\r\n    method: 'PUT',\r\n    data\r\n  })\r\n}\r\nexport function Rights(data) {\r\n  // 所有权限列表\r\n  return api({\r\n    url: 'rights/' + data.type,\r\n    method: 'GET'\r\n  })\r\n}\r\nexport function Roles() {\r\n  // 所有角色列表\r\n  return api({\r\n    url: 'roles/',\r\n    method: 'GET'\r\n  })\r\n}\r\nexport function AddRoles(data) {\r\n  // 添加角色\r\n  return api({\r\n    url: 'roles/',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\nexport function UpdateList(data) {\r\n  // 编辑角色\r\n  return api({\r\n    url: 'roles/' + data.id,\r\n    method: 'PUT',\r\n    data\r\n  })\r\n}\r\nexport function DelList(data) {\r\n  // 删除角色\r\n  return api({\r\n    url: 'roles/' + data.id,\r\n    method: 'DELETE'\r\n  })\r\n}\r\nexport function SetRoles(data) {\r\n  // 设置角色权限\r\n  return api({\r\n    url: 'roles/' + data.id + '/rights',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\nexport function DelRoles(data) {\r\n  // 删除指定权限\r\n  return api({\r\n    url: 'roles/' + data.roleId + '/rights/' + data.rightId,\r\n    method: 'DELETE'\r\n  })\r\n}\r\nexport function Reports(data) {\r\n  // 数据报表\r\n  return api({\r\n    url: 'reports/type/1',\r\n    method: 'GET'\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","on","clear","input","model","value","current","callback","$$v","$set","expression","search","slot","add","_v","tableData","scopedSlots","_u","key","fn","scope","$event","change","row","updates","del","set","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","title","dialogVisible","handleClose","directives","name","rawName","ref","form","rules","_e","_s","userBox","username","role_name","options","defaultParams","handleChange","submitForm","staticRenderFns","data","_","password","email","mobile","required","message","trigger","min","max","pattern","tableDataS","query","id","label","children","methods","send","GetList","List","$refs","resetFields","type","SetUser","rid","valid","AddUsers","console","UpArr","then","val","done","$confirm","catch","ele","JSON","parse","stringify","log","confirmButtonText","cancelButtonText","Del","Roles","e","State","components","MBX","computed","watch","created","component","LoginApi","api","url","method","GetMenus","params","Rights","AddRoles","UpdateList","DelList","SetRoles","DelRoles","roleId","rightId","Reports"],"sourceRoot":""}