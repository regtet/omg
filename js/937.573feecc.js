"use strict";(self["webpackChunklike"]=self["webpackChunklike"]||[]).push([[937],{2348:function(e,t,a){a.d(t,{Z:function(){return u}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/stimulate"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v(e._s(e.label1))]),a("el-breadcrumb-item",[e._v(e._s(e.label2))])],1)],1)},i=[],l={props:["label1","label2"],data(){return{}},methods:{},components:{},computed:{},watch:{},created(){}},n=l,o=a(1001),s=(0,o.Z)(n,r,i,!1,null,"cda8670e",null),u=s.exports},78:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"categories"},[a("MBX",{attrs:{label1:"商品管理",label2:"商品分类"}}),a("el-card",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加分类")]),a("el-table",{staticClass:"mt",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"cat_id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"},stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(void 0!=t.row.index?t.row.index+1:"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"cat_name",label:"分类名称"}}),a("el-table-column",{attrs:{label:"是否有效"}},[[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#48d80e"}})]],2),a("el-table-column",{attrs:{prop:"cat_level",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{effect:"dark",size:"mini",type:0==t.row.cat_level?"":1==t.row.cat_level?"success":"warning"}},[e._v(" "+e._s(0==t.row.cat_level?"一级":"1"==t.row.cat_level?"二级":"三级")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.updates(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"mt",attrs:{"current-page":e.GoodsData.pagenum,"page-sizes":[5,10,20],"page-size":e.GoodsData.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.GoodsData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.title?"添加分类":"编辑分类",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.ruleForm.cat_name,callback:function(t){e.$set(e.ruleForm,"cat_name",t)},expression:"ruleForm.cat_name"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"title"}],attrs:{label:"父级分类"}},[a("el-cascader",{attrs:{options:e.options,props:{checkStrictly:!0,label:"cat_name",value:"cat_id",children:"children",emitPath:!0},clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.out}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)],1)],1)},i=[],l=a(2348),n=a(2767),o={data(){return{dialogVisible:!1,query:"",title:!0,ruleForm:{cat_name:""},rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:1,max:16,message:"",trigger:"blur"}]},options:[],value:[],tableData:[],GoodsData:{pagenum:1,pagesize:5,total:10},id:0}},methods:{async send(){const e=await(0,n.m1)(this.GoodsData);this.GoodsData.total=e.total,this.GoodsData.pagenum=e.pagenum+1,this.GoodsData.pagesize=e.pagesize,e.result.forEach(((e,t)=>{e.index=t})),this.tableData=e.result,this.options=e.result},async add(){this.title=!0,this.dialogVisible=!0;const e=await(0,n.m1)();console.log(e),this.options=e},out(){this.$refs.ruleForm.resetFields(),this.value=[],this.dialogVisible=!1},ok(){this.$refs.ruleForm.validate((async e=>{if(!e)return console.log("error submit!!"),!1;if(this.title){let e=0==this.value.length?0:this.value[this.value.length-1];console.log(e,1111);(0,n.$K)({cat_pid:e,cat_name:this.ruleForm.cat_name,cat_level:this.value.length});this.dialogVisible=!1,this.$refs.ruleForm.resetFields(),this.value=[],this.send()}else{await(0,n.NL)({id:this.id,cat_name:this.ruleForm.cat_name});this.dialogVisible=!1,this.$refs.ruleForm.resetFields(),this.send()}}))},updates(e){console.log(e),this.id=e.cat_id,this.title=!1,this.dialogVisible=!0,this.ruleForm.cat_name=e.cat_name},del(e){this.id=e.cat_id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await(0,n.g_)(e.cat_id);this.send(),this.$message({type:"success",message:"删除成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleSizeChange(e){this.GoodsData.pagesize=e,this.send(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){console.log(`当前页: ${e}`),this.GoodsData.pagenum=e,this.send()},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{}))}},components:{MBX:l.Z},computed:{},watch:{},created(){this.send()}},s=o,u=a(1001),c=(0,u.Z)(s,r,i,!1,null,"623fd37d",null),d=c.exports},2767:function(e,t,a){a.d(t,{$K:function(){return n},Ce:function(){return i},NL:function(){return o},UY:function(){return c},V6:function(){return m},Wd:function(){return u},Yp:function(){return p},cD:function(){return h},g_:function(){return s},gg:function(){return d},m1:function(){return l},ol:function(){return f},yr:function(){return g}});var r=a(1899);function i(e){return(0,r.Z)({url:"goods",method:"GET",params:e})}function l(e){return(0,r.Z)({url:"categories",method:"GET",params:e})}function n(e){return(0,r.Z)({url:"categories",method:"POST",data:e})}function o(e){return(0,r.Z)({url:"categories/"+e.id,method:"PUT",data:e})}function s(e){return(0,r.Z)({url:"categories/"+e,method:"DELETE"})}function u(e){return(0,r.Z)({url:"categories/"+e.id+"/attributes",method:"GET",params:e})}function c(e){return(0,r.Z)({url:"categories/"+e.id+"/attributes",method:"POST",data:e})}function d(e){return(0,r.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"PUT",data:e})}function m(e){return console.log(e),(0,r.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"DELETE"})}function h(e){return(0,r.Z)({url:"goods/",method:"POST",data:e})}function g(e){return(0,r.Z)({url:"goods/"+1*e.goods_id,method:"PUT",data:e})}function p(e){return(0,r.Z)({url:"goods/"+e,method:"DELETE"})}function f(e){return(0,r.Z)({url:"goods/"+e.id,method:"GET"})}}}]);
//# sourceMappingURL=937.573feecc.js.map