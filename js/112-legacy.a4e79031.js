"use strict";(self["webpackChunklike"]=self["webpackChunklike"]||[]).push([[112],{2857:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add"},[n("MBX",{attrs:{label1:"商品管理",label2:"添加商品"}}),n("el-card",[n("el-alert",{attrs:{closable:!1,center:"",title:"添加商品信息",type:"info","show-icon":""}}),n("el-steps",{staticStyle:{padding:"20px 250px 20px 50px","font-size":"16px"},attrs:{"align-center":"",active:e.active,"finish-status":"success"}},[n("el-step",{attrs:{title:"基本信息"}}),n("el-step",{attrs:{title:"商品参数"}}),n("el-step",{attrs:{title:"商品属性"}}),n("el-step",{attrs:{title:"商品图片"}}),n("el-step",{attrs:{title:"商品内容"}}),n("el-step",{attrs:{title:"完成"}})],1),[n("el-tabs",{attrs:{"tab-position":"left","before-leave":e.tabChange},on:{"tab-click":e.ClickChange}},[n("el-tab-pane",{attrs:{label:"基本信息"}},[n("el-form",{ref:"add",staticClass:"demo-add",attrs:{model:e.add,rules:e.rules}},[n("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[n("el-input",{model:{value:e.add.goods_name,callback:function(t){e.$set(e.add,"goods_name",t)},expression:"add.goods_name"}})],1),n("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[n("el-input",{attrs:{type:"number"},model:{value:e.add.goods_price,callback:function(t){e.$set(e.add,"goods_price",t)},expression:"add.goods_price"}})],1),n("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[n("el-input",{attrs:{type:"number"},model:{value:e.add.goods_weight,callback:function(t){e.$set(e.add,"goods_weight",t)},expression:"add.goods_weight"}})],1),n("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[n("el-input",{attrs:{type:"number"},model:{value:e.add.goods_number,callback:function(t){e.$set(e.add,"goods_number",t)},expression:"add.goods_number"}})],1),n("el-form-item",{attrs:{label:"商品分类"}},[n("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.add.value,callback:function(t){e.$set(e.add,"value",t)},expression:"add.value"}})],1)],1)],1),n("el-tab-pane",{attrs:{label:"商品参数"}},e._l(e.CanShu,(function(t,o){return n("div",{key:o},[n("el-checkbox-group",{ref:"group",refInFor:!0,model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(""==t.attr_vals?[]:t.attr_vals.split(","),(function(t,o){return n("el-checkbox",{key:o,attrs:{label:t,border:""},on:{change:function(n){return e.delChange(t)}}})})),1)],1)})),0),n("el-tab-pane",{attrs:{label:"商品属性"}},e._l(e.ShuXing,(function(t,o){return n("div",{key:o,staticStyle:{padding:"10px"}},[n("li",[e._v(e._s(t.attr_name))]),n("el-input",{staticClass:"mt",attrs:{disabled:""},model:{value:t.attr_vals,callback:function(n){e.$set(t,"attr_vals",n)},expression:"item.attr_vals"}})],1)})),0),n("el-tab-pane",{attrs:{label:"商品图片"}},[n("el-upload",{ref:"upload",attrs:{action:"http://www.ysqorz.top:8888/api/private/v1/upload","list-type":"picture-card","auto-upload":!0,headers:{Authorization:e.token},"on-success":e.successPics},scopedSlots:e._u([{key:"file",fn:function(t){var o=t.file;return n("div",{},[n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:o.url,alt:""}}),n("span",{staticClass:"el-upload-list__item-actions"},[n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(o)}}},[n("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(o)}}},[n("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(o)}}},[n("i",{staticClass:"el-icon-delete"})])])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),n("el-tab-pane",{attrs:{label:"商品内容"}},[n("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),n("el-button",{staticClass:"mt",attrs:{type:"primary"},on:{click:e.AddDate}},[e._v("添加商品")])],1)],1)]],2)],1)},a=[],r=n(6198),i=(n(9600),n(5666),n(2767)),s=(n(1629),n(2348)),l={data:function(){return{checkList:[],content:null,editorOption:{},active:0,ruleForm:{name:""},options:[],rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品名称",trigger:"blur"},{pattern:/^[0-9]*$/,message:"只能输入数字",trigger:"blur"}]},add:{goods_name:"",goods_cat:"",goods_price:"",goods_number:"",goods_weight:"",goods_introduce:"",pics:[],attrs:[],value:[]},CanShu:[],ShuXing:[],checked1:"",dialogImageUrl:"",dialogVisible:!1,disabled:!1,file:[],token:sessionStorage.getItem("touken")}},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){},handleRemove:function(e){console.log(e)},handlePictureCardPreview:function(e){console.log(e),this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload:function(e){console.log(e)},change:function(e){console.log(e)},tabChange:function(e,t){var n=this;if(this.add.value.length<3&&void 0!==t)return this.$message({message:"警告哦，请先选择三级分类",type:"warning"}),!1;this.active=1*e,1==e?(0,i.Wd)({sel:"many",id:this.add.value[this.add.value.length-1]}).then((function(e){n.CanShu=e})):2==e&&(0,i.Wd)({sel:"only",id:this.add.value[this.add.value.length-1]}).then((function(e){n.ShuXing=e}))},ClickChange:function(e){console.log(e)},send:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.m1)();case 2:n=t.sent,e.options=n;case 4:case"end":return t.stop()}}),t)})))()},handleChange:function(){console.log(this.add.value)},AddDate:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.checkList,e.CanShu),console.log(e.$refs.upload.uploadFiles),n={goods_cat:e.add.value.join(","),goods_introduce:e.content,goods_name:e.add.goods_name,goods_number:e.add.goods_number,goods_price:e.add.goods_price,goods_weight:e.add.goods_weight,pics:e.add.pics},t.next=5,(0,i.cD)(n);case 5:o=t.sent,console.log(o),e.content="",e.add.goods_name="",e.add.goods_number="",e.add.goods_price="",e.add.goods_weight="",e.send(),e.$router.push("/goods");case 14:case"end":return t.stop()}}),t)})))()},delChange:function(e){console.log(e)},successPics:function(e){console.log(e),this.add.pics.push(e.data.tmp_path)}},components:{MBX:s.Z},computed:{},watch:{},created:function(){this.send()}},d=l,u=n(1001),c=(0,u.Z)(d,o,a,!1,null,"75678cd4",null),g=c.exports},9341:function(e,t,n){var o=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&o((function(){n.call(null,t||function(){return 1},1)}))}},9600:function(e,t,n){var o=n(2109),a=n(1702),r=n(8361),i=n(5656),s=n(9341),l=a([].join),d=r!=Object,u=s("join",",");o({target:"Array",proto:!0,forced:d||!u},{join:function(e){return l(i(this),void 0===e?",":e)}})},2767:function(e,t,n){n.d(t,{$K:function(){return i},Ce:function(){return a},NL:function(){return s},UY:function(){return u},V6:function(){return g},Wd:function(){return d},Yp:function(){return m},cD:function(){return p},g_:function(){return l},gg:function(){return c},m1:function(){return r},ol:function(){return h},yr:function(){return f}});var o=n(1899);function a(e){return(0,o.Z)({url:"goods",method:"GET",params:e})}function r(e){return(0,o.Z)({url:"categories",method:"GET",params:e})}function i(e){return(0,o.Z)({url:"categories",method:"POST",data:e})}function s(e){return(0,o.Z)({url:"categories/"+e.id,method:"PUT",data:e})}function l(e){return(0,o.Z)({url:"categories/"+e,method:"DELETE"})}function d(e){return(0,o.Z)({url:"categories/"+e.id+"/attributes",method:"GET",params:e})}function u(e){return(0,o.Z)({url:"categories/"+e.id+"/attributes",method:"POST",data:e})}function c(e){return(0,o.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"PUT",data:e})}function g(e){return console.log(e),(0,o.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"DELETE"})}function p(e){return(0,o.Z)({url:"goods/",method:"POST",data:e})}function f(e){return(0,o.Z)({url:"goods/"+1*e.goods_id,method:"PUT",data:e})}function m(e){return(0,o.Z)({url:"goods/"+e,method:"DELETE"})}function h(e){return(0,o.Z)({url:"goods/"+e.id,method:"GET"})}}}]);
//# sourceMappingURL=112-legacy.a4e79031.js.map