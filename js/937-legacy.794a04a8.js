(self["webpackChunklike"]=self["webpackChunklike"]||[]).push([[937],{78:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"categories"},[r("MBX",{attrs:{label1:"商品管理",label2:"商品分类"}}),r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加分类")]),r("el-table",{staticClass:"mt",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"cat_id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"},stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(void 0!=t.row.index?t.row.index+1:"")+" ")]}}])}),r("el-table-column",{attrs:{prop:"cat_name",label:"分类名称"}}),r("el-table-column",{attrs:{label:"是否有效"}},[[r("i",{staticClass:"el-icon-success",staticStyle:{color:"#48d80e"}})]],2),r("el-table-column",{attrs:{prop:"cat_level",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{effect:"dark",size:"mini",type:0==t.row.cat_level?"":1==t.row.cat_level?"success":"warning"}},[e._v(" "+e._s(0==t.row.cat_level?"一级":"1"==t.row.cat_level?"二级":"三级")+" ")])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.updates(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{staticClass:"mt",attrs:{"current-page":e.GoodsData.pagenum,"page-sizes":[5,10,20],"page-size":e.GoodsData.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.GoodsData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.title?"添加分类":"编辑分类",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[r("el-input",{model:{value:e.ruleForm.cat_name,callback:function(t){e.$set(e.ruleForm,"cat_name",t)},expression:"ruleForm.cat_name"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"title"}],attrs:{label:"父级分类"}},[r("el-cascader",{attrs:{options:e.options,props:{checkStrictly:!0,label:"cat_name",value:"cat_id",children:"children",emitPath:!0},clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.out}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)],1)],1)},a=[],o=r(6198),i=(r(5666),r(1539),r(4747),r(2348)),s=r(2767),u={data:function(){return{dialogVisible:!1,query:"",title:!0,ruleForm:{cat_name:""},rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:1,max:16,message:"",trigger:"blur"}]},options:[],value:[],tableData:[],GoodsData:{pagenum:1,pagesize:5,total:10},id:0}},methods:{send:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.m1)(e.GoodsData);case 2:r=t.sent,e.GoodsData.total=r.total,e.GoodsData.pagenum=r.pagenum+1,e.GoodsData.pagesize=r.pagesize,r.result.forEach((function(e,t){e.index=t})),e.tableData=r.result,e.options=r.result;case 9:case"end":return t.stop()}}),t)})))()},add:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.title=!0,e.dialogVisible=!0,t.next=4,(0,s.m1)();case 4:r=t.sent,console.log(r),e.options=r;case 7:case"end":return t.stop()}}),t)})))()},out:function(){this.$refs.ruleForm.resetFields(),this.value=[],this.dialogVisible=!1},ok:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=19;break}if(!e.title){t.next=11;break}n=0==e.value.length?0:e.value[e.value.length-1],console.log(n,1111),(0,s.$K)({cat_pid:n,cat_name:e.ruleForm.cat_name,cat_level:e.value.length}),e.dialogVisible=!1,e.$refs.ruleForm.resetFields(),e.value=[],e.send(),t.next=17;break;case 11:return t.next=13,(0,s.NL)({id:e.id,cat_name:e.ruleForm.cat_name});case 13:t.sent,e.dialogVisible=!1,e.$refs.ruleForm.resetFields(),e.send();case 17:t.next=21;break;case 19:return console.log("error submit!!"),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},updates:function(e){console.log(e),this.id=e.cat_id,this.title=!1,this.dialogVisible=!0,this.ruleForm.cat_name=e.cat_name},del:function(e){var t=this;this.id=e.cat_id,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,o.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,s.g_)(e.cat_id);case 2:r.sent,t.send(),t.$message({type:"success",message:"删除成功!"});case 5:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.GoodsData.pagesize=e,this.send(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.GoodsData.pagenum=e,this.send()},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}},components:{MBX:i.Z},computed:{},watch:{},created:function(){this.send()}},c=u,l=r(1001),d=(0,l.Z)(c,n,a,!1,null,"623fd37d",null),f=d.exports},8533:function(e,t,r){"use strict";var n=r(2092).forEach,a=r(9341),o=a("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},2092:function(e,t,r){var n=r(9974),a=r(1702),o=r(8361),i=r(7908),s=r(6244),u=r(5417),c=a([].push),l=function(e){var t=1==e,r=2==e,a=3==e,l=4==e,d=6==e,f=7==e,m=5==e||d;return function(h,p,g,v){for(var b,_,w=i(h),x=o(w),y=n(p,g),k=s(x),E=0,C=v||u,Z=t?C(h,k):r||f?C(h,0):void 0;k>E;E++)if((m||E in x)&&(b=x[E],_=y(b,E,w),e))if(t)Z[E]=_;else if(_)switch(e){case 3:return!0;case 5:return b;case 6:return E;case 2:c(Z,b)}else switch(e){case 4:return!1;case 7:c(Z,b)}return d?-1:a||l?l:Z}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},9341:function(e,t,r){"use strict";var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},7475:function(e,t,r){var n=r(7854),a=r(3157),o=r(4411),i=r(111),s=r(5112),u=s("species"),c=n.Array;e.exports=function(e){var t;return a(e)&&(t=e.constructor,o(t)&&(t===c||a(t.prototype))?t=void 0:i(t)&&(t=t[u],null===t&&(t=void 0))),void 0===t?c:t}},5417:function(e,t,r){var n=r(7475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},3157:function(e,t,r){var n=r(4326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},4747:function(e,t,r){var n=r(7854),a=r(8324),o=r(8509),i=r(8533),s=r(8880),u=function(e){if(e&&e.forEach!==i)try{s(e,"forEach",i)}catch(t){e.forEach=i}};for(var c in a)a[c]&&u(n[c]&&n[c].prototype);u(o)},2767:function(e,t,r){"use strict";r.d(t,{$K:function(){return i},Ce:function(){return a},NL:function(){return s},UY:function(){return l},V6:function(){return f},Wd:function(){return c},Yp:function(){return p},cD:function(){return m},g_:function(){return u},gg:function(){return d},m1:function(){return o},ol:function(){return g},yr:function(){return h}});var n=r(1899);function a(e){return(0,n.Z)({url:"goods",method:"GET",params:e})}function o(e){return(0,n.Z)({url:"categories",method:"GET",params:e})}function i(e){return(0,n.Z)({url:"categories",method:"POST",data:e})}function s(e){return(0,n.Z)({url:"categories/"+e.id,method:"PUT",data:e})}function u(e){return(0,n.Z)({url:"categories/"+e,method:"DELETE"})}function c(e){return(0,n.Z)({url:"categories/"+e.id+"/attributes",method:"GET",params:e})}function l(e){return(0,n.Z)({url:"categories/"+e.id+"/attributes",method:"POST",data:e})}function d(e){return(0,n.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"PUT",data:e})}function f(e){return console.log(e),(0,n.Z)({url:"categories/"+e.cid+"/attributes/"+e.id,method:"DELETE"})}function m(e){return(0,n.Z)({url:"goods/",method:"POST",data:e})}function h(e){return(0,n.Z)({url:"goods/"+1*e.goods_id,method:"PUT",data:e})}function p(e){return(0,n.Z)({url:"goods/"+e,method:"DELETE"})}function g(e){return(0,n.Z)({url:"goods/"+e.id,method:"GET"})}}}]);
//# sourceMappingURL=937-legacy.794a04a8.js.map